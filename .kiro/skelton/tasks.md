# アプリケーションスケルトン - タスク一覧

## フェーズ1: 基本構造

- [x] 1. プロジェクトの初期化
  - [x] 1.1 go.mod の作成
  - [x] 1.2 基本的なディレクトリ構造の作成
  - [x] 1.3 依存関係のインストール（Ebitengine, golang.org/x/text）

- [x] 2. pkg/cli の実装
  - [x] 2.1 Config 構造体の定義
  - [x] 2.2 ParseArgs 関数の実装
  - [x] 2.3 PrintHelp 関数の実装
  - [x] 2.4 コマンドライン引数解析のユニットテスト

- [x] 3. pkg/logger の実装
  - [x] 3.1 InitLogger 関数の実装
  - [x] 3.2 GetLogger 関数の実装
  - [x] 3.3 ログレベル設定のユニットテスト

- [x] 4. pkg/app の基本構造
  - [x] 4.1 Application 構造体の定義
  - [x] 4.2 New 関数の実装
  - [x] 4.3 parseArgs メソッドの実装
  - [x] 4.4 initLogger メソッドの実装

- [x] 5. cmd/son-et/main.go の実装
  - [x] 5.1 main 関数の実装
  - [x] 5.2 embed.FS の設定（空のディレクトリ）
  - [x] 5.3 エラーハンドリングの実装

## フェーズ2: タイトル管理

- [x] 6. pkg/title の実装
  - [x] 6.1 FillyTitle 構造体の定義
  - [x] 6.2 FillyTitleRegistry 構造体の定義
  - [x] 6.3 NewFillyTitleRegistry 関数の実装
  - [x] 6.4 LoadExternalTitle メソッドの実装
  - [x] 6.5 GetAvailableTitles メソッドの実装
  - [x] 6.6 SelectTitle メソッドの実装
  - [x] 6.7 タイトル選択ロジックのユニットテスト

- [x] 7. pkg/app へのタイトル管理機能の統合
  - [x] 7.1 loadTitle メソッドの実装
  - [x] 7.2 selectTitle メソッドの実装（仮実装：最初のタイトルを返す）
  - [x] 7.3 タイトル読み込みの統合テスト

## フェーズ3: スクリプト読み込み

- [x] 8. pkg/script の実装
  - [x] 8.1 Script 構造体の定義
  - [x] 8.2 Loader 構造体の定義
  - [x] 8.3 NewLoader 関数の実装
  - [x] 8.4 findScriptFiles メソッドの実装（case-insensitive）
  - [x] 8.5 loadScript メソッドの実装
  - [x] 8.6 convertShiftJISToUTF8 関数の実装
  - [x] 8.7 LoadAllScripts メソッドの実装
  - [x] 8.8 スクリプト読み込みのユニットテスト

- [x] 9. テストデータの作成
  - [x] 9.1 サンプルFILLYタイトルディレクトリの作成
  - [x] 9.2 Shift-JISエンコーディングのテストスクリプトファイルの作成
  - [x] 9.3 UTF-8エンコーディングのテストスクリプトファイルの作成

- [x] 10. pkg/app へのスクリプト読み込み機能の統合
  - [x] 10.1 loadScripts メソッドの実装
  - [x] 10.2 スクリプト読み込み結果のログ出力
  - [x] 10.3 スクリプト読み込みの統合テスト

## フェーズ4: GUI

- [x] 11. pkg/window の基本構造
  - [x] 11.1 Mode 定数の定義
  - [x] 11.2 Game 構造体の定義
  - [x] 11.3 NewGame 関数の実装
  - [x] 11.4 Layout メソッドの実装

- [x] 12. タイトル選択画面の実装
  - [x] 12.1 Update メソッドの実装（選択画面モード）
  - [x] 12.2 Draw メソッドの実装（選択画面モード）
  - [x] 12.3 矢印キーでの選択移動処理
  - [x] 12.4 Enterキーでの決定処理
  - [x] 12.5 Escキーでの終了処理
  - [x] 12.6 タイトル選択画面のテスト

- [x] 13. 仮想デスクトップの実装
  - [x] 13.1 Update メソッドの実装（デスクトップモード）
  - [x] 13.2 Draw メソッドの実装（デスクトップモード）
  - [x] 13.3 背景色 #0087C8 の描画
  - [x] 13.4 タイムアウト処理の実装
  - [x] 13.5 仮想デスクトップのテスト

- [x] 14. ヘッドレスモードの実装
  - [x] 14.1 RunHeadless 関数の実装
  - [x] 14.2 標準入出力でのタイトル選択
  - [x] 14.3 ヘッドレスモードでのタイムアウト処理
  - [x] 14.4 ヘッドレスモードのテスト

- [x] 15. pkg/window の統合
  - [x] 15.1 Run 関数の実装
  - [x] 15.2 Ebitengineの初期化とエラーハンドリング
  - [x] 15.3 ウィンドウ設定（サイズ、タイトル）

- [x] 16. pkg/app へのGUI機能の統合
  - [x] 16.1 selectTitle メソッドの完全実装
  - [x] 16.2 runDesktop メソッドの実装
  - [x] 16.3 ヘッドレスモードとGUIモードの切り替え
  - [x] 16.4 GUI統合テスト

## フェーズ5: 統合とテスト

- [ ] 17. エンドツーエンドテスト
  - [ ] 17.1 外部タイトル指定での起動テスト
  - [ ] 17.2 embedタイトル（単一）での起動テスト
  - [ ] 17.3 embedタイトル（複数）での選択画面テスト
  - [ ] 17.4 ヘッドレスモードでの起動テスト
  - [ ] 17.5 タイムアウト機能のテスト

- [ ] 18. エラーハンドリングのテスト
  - [ ] 18.1 無効なコマンドライン引数のテスト
  - [ ] 18.2 存在しないディレクトリ指定のテスト
  - [ ] 18.3 スクリプトファイルが存在しない場合のテスト
  - [ ] 18.4 Shift-JIS変換エラーのテスト

- [ ] 19. ドキュメントの整備
  - [ ] 19.1 README.md の作成
  - [ ] 19.2 使用例の追加
  - [ ] 19.3 ビルド手順の記載

- [ ] 20. 最終確認
  - [ ] 20.1 すべてのユニットテストが通ることを確認
  - [ ] 20.2 すべての統合テストが通ることを確認
  - [ ] 20.3 コードレビュー
  - [ ] 20.4 requirements.md の受け入れ基準を満たしているか確認
